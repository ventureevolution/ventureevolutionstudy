<!-- Styling of the page -->
<style>
	#stage5-example-attribute{
		font-weight: bold;
        text-transform: capitalize;
	}
	.ui-dialog {
	    z-index: 3000;
    }
    .stage5-company-name{
        font-weight: bold;
        text-transform: capitalize;
    }
    .stage5-vs-text{
	    padding-top: 7px;
    }
    button.ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-icon-only.ui-dialog-titlebar-close{
	    display: none;
    }
    #tabling {
	    padding-top: 200px;
    }
    .navbar.navbar-default{
    	padding-top: 30px;
	    background-image: none;
	    background-color: #ffffff;
	    border: none;
	    box-shadow: none;
	    -webkit-box-shadow: none;
    }
    #stage5-top{
	    padding-top: 0px;
    }
</style>
<!-- Dialog Message Area -->
<!-- Error Message -->
<div id="stage5-dialog-errorMessage">
  <p>
    <div id="S5P2" class="textreplace"></div>
  </p>
</div>
<!-- Content of the page -->
<nav class="navbar navbar-default navbar-fixed-top">
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
			<p><div id="S5P3" class="textreplace"></div><b class="stage5-company-name"></b><div id="S5P4" class="textreplace"></div></p>
			<p><div id="S5P5" class="textreplace"></div></p><br><br>
		</div>
	</div>
</nav>
<div id="stage5-top">&nbsp;</div>
<div class="row">
	<div class="col-md-8 col-md-offset-2" id="stage5-form">
	</div>
</div>
<div class="row">
	<div class="col-md-8 col-md-offset-2">
		<center><p><div id="S5P6" class="textreplace"></div></p>
		<br>
		<button class="btn btn-success" id="nextPage"><div id="S5P7" class="textreplace"></div></button></center>
	</div>
</div>
<!-- Script of the page -->
<script>
$('html,body').animate({scrollTop:$('#stage5-top').offset().top},1000);
languageReplace();

//Form placeholder text
$("#stage5-dialog-errorMessage").attr("title",languageReplacement['S5P13']);

$( document ).ready(function() {

	attributeSequenceStage5 = generateRandomSequenceArrayStage5(attributedata.length);

	//Display the first example attribute
	$(".stage5-company-name").append(mycompanydata[0]);
	
	//Display each attribute as a row and input using a loop
	var stage5MaxAttributeNumber = attributedata.length;
	
	var stage5Counter = 0;
	
	while(stage5Counter < stage5MaxAttributeNumber){
		$("#stage5-form").append('<div class="row" id="stage5-form-attribute-'+attributeSequenceStage5[stage5Counter]+'"><div class="col-md-5"><div class="form-group"><input type="text" class="form-control attribute-original" placeholder="'+languageReplacement['S5P8']+'" value="'+attributedata[attributeSequenceStage5[stage5Counter]]+'"></div></div><div class="col-md-2 stage5-vs-text"><center><p>'+languageReplacement['S5P14']+'</p></center></div><div class="col-md-5"><div class="form-group"><input type="text" class="form-control attribute-opposite" placeholder="'+languageReplacement['S5P9']+'"></div></div></div>');
		stage5Counter++;
	}
	
	//Enable the next page button
	$("#nextPage").click(function(){
		
		if(stage5CheckAllAttributesFilled()){
		
			//Save all the attributes both original and opposite
			stage5SaveAttributes();
			
            //Change the loading image
            $("#nextPage").empty();
            $("#nextPage").append('<span class="glyphicon glyphicon-cog next-rotation-animate"></span> Loading');
					
            stageCurrentStage++;
            runStage(stages[stageCurrentStage]);	
		}else{
			$( "#stage5-dialog-errorMessage" ).dialog( "open" );
			debug("Stage5 - some fields are empty, hence unable to proceed");
		}
		
	});
	
	//Dialog function
	$(function() {
		//Open error: incomplete information message
		$( "#stage5-dialog-errorMessage" ).dialog({
			autoOpen: false,
			modal: true,
			buttons: {
				Ok: function() {
					$(this).dialog( languageReplacement['S5P11'] );
				}
			}
		});
	});
	
	function generateRandomSequenceArrayStage5(anArrayLength){
		
		var tempArray = new Array();
		
		debug("Stage5 - generateRandomSequenceArray: populate array");
		//Populate the array
		for(i = 0; i < anArrayLength; i++){
			tempArray.push(i);
		}
		
		debug("Stage5 - generateRandomSequenceArray shuffle array");
		for(j = anArrayLength - 1; j >= 0; j--){
			
			var tempValue, tempIndex;
			
			tempIndex = Math.floor(Math.random() * j);
			
			tempValue = tempArray[j];
			tempArray[j] = tempArray[tempIndex];
			tempArray[tempIndex] = tempValue;
			
		}
		
		debug("Stage5 - generateRandomSequenceArray shuffle array result: " + tempArray.join(","));
		
		return tempArray;
	}
	
	function stage5CheckAllAttributesFilled(){
	
		debug("Stage5 - stage5CheckAllAttributesFilled() running");
		
		var confirmFilled = true;
	
		$("#stage5-form .row").each(function(){
			
			//Store the attributes
			var attributeOriginal = $(this).find(".attribute-original").val();
			var attributeOpposite = $(this).find(".attribute-opposite").val();
			
			if((attributeOriginal == "") || (attributeOpposite == "")){
				confirmFilled = false;
			}
			
			debug("Stage5 - stage5CheckAllAttributesFilled() - confirmFilled: "+confirmFilled);
			
		});
		
		return confirmFilled;
	}
	
	function stage5SaveAttributes(){

		debug("Stage5 - stage5SaveAttributes() running");	
	
		$("#stage5-form .row").each(function(){
			
			//Get the attributes
			var stage5AttributeId = parseInt($(this).attr("id").substring(22));
			
			//Store the attributes
			attributedata[stage5AttributeId] = $(this).find(".attribute-original").val();
			debug("Stage5 - stage5SaveAttributes() - attributedata: "+attributedata[stage5AttributeId]);
			
			attributedataopp[stage5AttributeId] = $(this).find(".attribute-opposite").val();
			debug("Stage5 - stage5SaveAttributes() - attributedataopp: "+attributedataopp[stage5AttributeId]);
		});
	}
	
});
</script>