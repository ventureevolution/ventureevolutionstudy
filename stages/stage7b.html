<!-- Styling of the page -->
<style type="text/css">
	.selectionButtonSlot{
		margin-bottom: 15px;
        overflow: scroll;
		white-space: normal;
	}
	.stage7B-remove {
		font-size: 2em;
		color: #768393;
		line-height: 34px;
	}
	.stage7B-remove:hover {
		color: #c7144d;
	}
	.stage7B-mycompany-name {
		text-transform: capitalize;
	}
	#stage7B-competitor-name {
		text-transform: capitalize;
	}
    .stage7B-term {
        width: 50%;
    }
    .stage7B-percentage {
        width: 10%;
    }
    .stage7B-button{
        margin-top: 10px;
        width: 80%;
        overflow: scroll;
        white-space: normal;
    }
    button.ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-icon-only.ui-dialog-titlebar-close{
	    display: none;
    }
    #tabling {
	    padding-top: 200px;
	}
	.navbar.navbar-default{
		padding-top: 30px;
	    background-image: none;
	    background-color: #ffffff;
	    border: none;
	    box-shadow: none;
	    -webkit-box-shadow: none;
	}
</style>
<!-- Dialog Message Area -->
<div id="stage7B-dialog-message-proceed">
  <p>
    <div id="S7BP10" class="textreplace"></div>
  </p>
</div>
<!-- Content of the page -->
<nav class="navbar navbar-default navbar-fixed-top">
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
			<center><p><div id="S7BP1" class="textreplace"></div><b class="stage7B-mycompany-name"></b><div id="S7BP2" class="textreplace"></div></p>
<p><div id="S7BP3" class="textreplace"></div><b class="stage7B-mycompany-name"></b><div id="S7BP3B" class="textreplace"></div><b class="stage7B-mycompany-name"></b><div id="S7BP3C" class="textreplace"></div></p><br><br></center>
		</div>
	</div>
</nav>
<div class="row">
	<div class="col-md-8 col-md-offset-2">
		<div id="stage7B-form"></div>
	</div>
</div>
<div class="row" id ="stage7B-next">
    <div class="col-md-8 col-md-offset-2">
        <br><br>
        <center><button class="btn btn-success" id="nextPage"><div id="S7BP9" class="textreplace"></div></button></center>
    </div>
</div>
<!-- Script of the page -->
<script>
languageReplace();

$( document ).ready(function() {

    $(".stage7B-mycompany-name").empty();
    $(".stage7B-mycompany-name").append(mycompanydata[0]);
    
    debug("stage7B running");
    debug("stage7B display all selections");
    for(var stage7BCounter = 0; stage7BCounter < comparisonData.length; stage7BCounter++){
        $("#stage7B-form").append('<div class="row"><div class="col-md-12"><center><button class="btn btn-danger btn-lg stage7B-button id="stage7B-button-id-'+stage7BCounter+'" name="'+comparisonData[stage7BCounter]+'">'+comparisonData[stage7BCounter]+'&nbsp;</button></center></div></div>');
    }
    
    debug("stage7B enable all selections click");
    //Enable all button click
    $(".stage7B-button").click(function(){
       if($(this).hasClass('btn-danger')){
           $(this).removeClass('btn-danger');
           $(this).addClass('btn-success');
           $(this).append('<span class="glyphicon glyphicon-ok"></span>');
       }else{
           $(this).removeClass('btn-success');
           $(this).find('.glyphicon-ok').remove();
           $(this).addClass('btn-danger');
       }
    });
    
    debug("stage7B enable nextPage button");
    //Go to next page
    $("#nextPage").click(function(){
        $("#stage7B-dialog-message-proceed").dialog("open");
    });
    
    
    //Dialog function
	$(function() {
		$( "#stage7B-dialog-message-proceed" ).dialog({
			autoOpen: false,
			modal: true,
			buttons: {
				Yes: function() {
					$(this).dialog( "close" );
                    
                    //Save the stage data
                    saveStage7BData();
                    
                    //Change the loading image
                    $("#nextPage").empty();
                    $("#nextPage").append('<span class="glyphicon glyphicon-cog next-rotation-animate"></span> Loading');
                    
					//Change stage count and jump to next stage
					stageCurrentStage++;
					runStage(stages[stageCurrentStage]);
				},
				No: function(){
					$(this).dialog("close");
				}
			}
		});
	});
    
    
    function saveStage7BData(){
        
        debug("stage7B saveStage7BData() save selections");
        $(".stage7B-button").each(function(){
            
            if($(this).hasClass('btn-success')){
                comparisonDataPair2.push([$(this).attr('name'),1]);
            }else{
                comparisonDataPair2.push([$(this).attr('name'),0]);
            }
        
        });
        
        debug("stage7B comparisonDataPair2: "+comparisonDataPair2);
    }
	
});
</script>